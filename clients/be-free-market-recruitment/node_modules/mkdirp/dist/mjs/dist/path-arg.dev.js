"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pathArg = void 0;

var _path = require("path");

var platform = process.env.__TESTING_MKDIRP_PLATFORM__ || process.platform;

var pathArg = function pathArg(path) {
  if (/\0/.test(path)) {
    // simulate same failure that node raises
    throw Object.assign(new TypeError('path must be a string without null bytes'), {
      path: path,
      code: 'ERR_INVALID_ARG_VALUE'
    });
  }

  path = (0, _path.resolve)(path);

  if (platform === 'win32') {
    var badWinChars = /[*|"<>?:]/;

    var _parse = (0, _path.parse)(path),
        root = _parse.root;

    if (badWinChars.test(path.substring(root.length))) {
      throw Object.assign(new Error('Illegal characters in path.'), {
        path: path,
        code: 'EINVAL'
      });
    }
  }

  return path;
};

exports.pathArg = pathArg;